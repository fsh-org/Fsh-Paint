<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Fsh Paint</title>
    <meta property="og:title" content="Fsh Paint">
    <meta name="twitter:title" content="Fsh Paint">
    <meta name="description" content="Fsh Paint, a easy to use online paint app.">
    <meta property="og:description" content="Fsh Paint, a easy to use online paint app.">
    <meta name="twitter:description" content="Fsh Paint, a easy to use online paint app.">
    <link rel="canonical" href="https://paint.fsh.plus">
    <meta property="og:url" content="https://paint.fsh.plus">
    <!-- ------- -->
    <meta charset="UTF-8">
    <meta name="robots" content="index, follow">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://fsh.plus/fsh.png" type="image/png">
    <meta property="og:image" content="https://fsh.plus/fsh.png">
    <meta property="og:image:alt" content="Fsh logo">
    <meta name="twitter:image" content="https://fsh.plus/fsh.png">
    <meta name="theme-color" content="#a89c9b">
    <!-- ------- -->
    <link rel="stylesheet" href="https://fsh.plus/media/style.css">
    <script src="https://account.fsh.plus/script.js"></script>
    <!-- ------------------ -->
    <link rel="stylesheet" href="/media/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tippy.js@6/dist/tippy-bundle.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/color-namer@1.4.0/dist/color-namer.js"></script>
  </head>
  <body>
    <dialog id="hello" closeby="none">
      <h2>Projects</h2>
      <div class="list">Loading...</div>
      <button class="new">New</button>
    </dialog>
    <dialog id="newp" closeby="any">
      <button onclick="this.parentElement.close()" class="modal-close">x</button>
      <h2>New project</h2>
      <label>Name: <input type="text" value="New project" maxlength="100" name="name" class="name"></label>
      <br>
      <label>Size: <input type="number" value="1920" min="1" name="width" class="x">x<input type="number" value="1080" min="1" name="height" class="y"></label>
      <br>
      <button class="create">Create</button>
    </dialog>
    <dialog id="export" closeby="any">
      <button onclick="this.parentElement.close()" class="modal-close">x</button>
      <h2>Export</h2>
      <div class="type">
        <button>JPEG</button>
        <button selected>PNG</button>
        <button webp>WebP</button>
        <button bmp>BMP</button>
      </div>
      <label>Transparency <input id="ex-trans" type="checkbox" checked></label>
      <br>
      <label for="ex-qual" style="font-family:ui-monospace,monospace">90%</label>
      <input id="ex-qual" type="range" min="1" max="100" value="90" step="1" oninput="document.querySelector('#export label[for]').innerText=this.value+'%'" disabled>
      <br>
      <button class="export">Export</button>
      <script type="module">
        let testcanvas = new OffscreenCanvas(1, 1);
        testcanvas.getContext('2d');

        testcanvas.convertToBlob({ type: 'image/webp' }).then(blob=>{
          if (blob.type!=='image/webp') document.querySelector('#export .type [webp]').style.display='none';
        });
        testcanvas.convertToBlob({ type: 'image/bmp' }).then(blob=>{
          if (blob.type!=='image/bmp') document.querySelector('#export .type [bmp]').style.display='none';
        });

        window.exporttype = 'png';
        document.querySelectorAll('#export .type button').forEach(btn=>{
          btn.onclick = ()=>{
            window.exporttype = btn.innerText.toLowerCase();
            document.querySelector('#export .type button[selected]').removeAttribute('selected');
            btn.setAttribute('selected', true);
            document.getElementById('ex-trans').disabled = ['jpeg','bmp'].includes(window.exporttype);
            if (['jpeg','bmp'].includes(window.exporttype)) document.getElementById('ex-trans').checked = false;
            document.getElementById('ex-qual').disabled = !['jpeg','webp'].includes(window.exporttype);
          };
        });

        document.querySelector('#export button.export').onclick = ()=>{
          window.compositeLayers(false, document.getElementById('ex-trans').checked).then(res=>res.convertToBlob({ type: 'image/'+window.exporttype, quality: document.getElementById('ex-qual').value/100 })).then(blob=>{
          let reader = new FileReader();
          reader.onload = ()=>{
            document.getElementById('export').close();
            let download = document.createElement('a');
            download.href = reader.result;
            download.download = window.projectdata.name+'.'+window.exporttype
            document.body.appendChild(download);
            download.click();
            download.remove();
          };
          reader.readAsDataURL(blob);
        });
        }
      </script>
    </dialog>
    <nav>
      <div class="nomobile">
        <img src="https://fsh.plus/fsh.png" width="50" height="50">
        <h1>Fsh Paint</h1>
      </div>
      <div id="actions">
        <button action="save" aria-label="Save" title="Save"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><rect x="125" y="10" width="32" height="70" rx="8"/><path fill-rule="evenodd" clip-rule="evenodd" d="M20 0C8.95431 0 0 8.95431 0 20V236C0 247.046 8.95431 256 20 256H236C247.046 256 256 247.046 256 236V128V72.2843C256 66.9799 253.893 61.8929 250.142 58.1421L197.858 5.85786C194.107 2.10714 189.02 0 183.716 0H180C174.477 0 170 4.47715 170 10V80C170 85.5229 165.523 90 160 90H65C59.4772 90 55 85.5229 55 80V20C55 8.95431 46.0457 0 35 0H20ZM62 160C50.9543 160 42 168.954 42 180V215C42 226.046 50.9543 235 62 235H194C205.046 235 214 226.046 214 215V180C214 168.954 205.046 160 194 160H62Z"/></svg></button>
        <button action="export" aria-label="Export" title="Export"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M128 190V20" stroke-width="40" stroke-linecap="round" fill="none"/><path d="M127.861 212.999C131.746 213.035 135.642 211.571 138.606 208.607L209.317 137.896C212.291 134.922 213.753 131.011 213.708 127.114C213.708 127.076 213.71 127.038 213.71 127C213.71 118.716 206.994 112 198.71 112H57C48.7157 112 42 118.716 42 127C42 127.045 42.0006 127.089 42.001 127.134C41.961 131.024 43.4252 134.927 46.3936 137.896L117.104 208.607L117.381 208.876C120.312 211.662 124.092 213.037 127.861 212.999Z"/><rect y="226" width="256" height="30" rx="15"/></svg></button>
      </div>
      <vr></vr>
      <div id="tools">
        <button id="t-pencil" onclick="window.setTool('pencil', this)" aria-label="Pencil" title="Pencil" selected><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M207.747 76.6945L78.6819 239.376L25.8919 255.811C23.8543 256.445 21.8251 254.809 22.012 252.684L26.844 197.709L154.989 35.1261L207.747 76.6945ZM181.174 1.90541C182.887 -0.267858 186.04 -0.637017 188.208 1.08216L233.106 36.6876C235.269 38.4035 235.633 41.5486 233.916 43.712L215.969 66.3331L163.157 24.7619L181.174 1.90541Z"/></svg></button>
        <button id="t-eraser" onclick="window.setTool('eraser', this)" aria-label="Eraser" title="Eraser"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M137.228 16.1255C144.062 9.29148 155.142 9.2915 161.976 16.1255L250.126 104.276C256.963 111.114 256.96 122.201 250.117 129.034L159.015 220.006H233.268C240.171 220.007 245.768 225.603 245.768 232.506C245.768 239.41 240.171 245.006 233.268 245.006H98.8831C97.7203 245.006 96.5947 244.847 95.5266 244.55H83.9192C79.2743 244.55 74.8198 242.702 71.5374 239.416L49.1965 217.046L5.12524 172.976C-1.60212 166.249 -1.70656 155.406 4.81079 148.55L5.12524 148.227L137.228 16.1255ZM92.3899 103.389C90.4373 101.437 87.2712 101.437 85.3186 103.389L31.6418 157.066C29.6893 159.019 29.6893 162.185 31.6418 164.137L66.885 199.38L85.5637 218.083C86.5016 219.022 87.7747 219.549 89.1018 219.549H122.023C123.347 219.549 124.618 219.023 125.555 218.087L162.81 180.886C164.765 178.934 164.766 175.767 162.813 173.813L92.3899 103.389Z"/></svg></button>
        <button id="t-select" onclick="window.setTool('select', this)" aria-label="Select" title="Select" style="display:none"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M35.0001 6.6967C35.0001 1.80929 40.5307 -1.02771 44.5003 1.82344L209.468 120.31C213.621 123.293 212.379 129.771 207.417 131.006L114.392 154.154C113.477 154.381 112.628 154.822 111.915 155.439L44.9263 213.41C41.04 216.773 35 214.012 35 208.873L35.0001 6.6967Z"/><path d="M96.8599 122.626L164.626 240" stroke-width="30" stroke-linecap="round" fill="none"/></svg></button>
        <button id="t-shapes" onclick="window.setTool('shapes', this)" aria-label="Shapes" title="Shapes" style="display:none"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M248 89.8242C252.418 89.8242 256 93.4061 256 97.8242V248C256 252.418 252.418 256 248 256H97.8242C93.4061 256 89.8242 252.418 89.8242 248V154.748C89.8244 150.944 92.5215 147.71 96.1689 146.628C120.37 139.452 139.452 120.37 146.628 96.1689C147.71 92.5213 150.944 89.8242 154.749 89.8242H248ZM68.8652 0C106.899 0 137.731 30.832 137.731 68.8652C137.731 106.899 106.899 137.731 68.8652 137.731C30.832 137.731 0 106.899 0 68.8652C0.00014019 30.8321 30.8321 0.000140208 68.8652 0Z"/></svg></button>
      </div>
      <vr></vr>
      <div id="currentcolors">
        <input type="color" id="primary" value="#ffffff">
        <input type="color" id="secondary" value="#000000">
      </div>
      <button id="rotatecolor"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path d="M72.7108 15L72.7107 241" stroke-width="30" stroke-linecap="round" fill="none"/><path d="M129.932 72L74.7071 16.7746" stroke-width="30" stroke-linecap="round" fill="none"/><path d="M15.7782 72L71.0036 16.7746" stroke-width="30" stroke-linecap="round" fill="none"/><path d="M183 241L183 15" stroke-width="30" stroke-linecap="round" fill="none"/><path d="M126.029 184L182.739 240.711" stroke-width="30" stroke-linecap="round" fill="none"/><path d="M239.682 184L182.971 240.711" stroke-width="30" stroke-linecap="round" fill="none"/></svg></button>
      <div id="colors"></div>
      <vr></vr>
      <div id="extra" type="draw">
        <label>Size: <input id="e-size" type="number" min="1" value="10"></label>
        <label>Cap: <select id="e-cap"><option>round</option><option>butt</option><option>square</option></select></label>
        <label>Step: <input id="e-step" type="number" min="0" value="0"></label>
      </div>
    </nav>
    <main>
      <div id="area">
        <div id="transforms"></div>
      </div>
      <div id="layers">
        <img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
        <div class="bar">
          <h2>Layers</h2>
          <button class="add">+</button>
        </div>
        <div class="list"></div>
      </div>
    </main>
    <script>
      window.db = null;
      window.projectdata = {};
    </script>
    <script src="/media/script.js"></script>
  </body>
</html>
